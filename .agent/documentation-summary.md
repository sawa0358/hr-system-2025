# データベース自動切り替えドキュメント作成完了

## 📋 作成したファイル一覧

### 1. **DATABASE_AUTO_SWITCH.md** （ルートディレクトリ）
- **目的**: データベース自動切り替えシステムの完全な説明
- **対象**: 開発者全員
- **内容**:
  - 自動切り替えの仕組み
  - 開発・本番環境の違い
  - トラブルシューティング
  - よくある質問

### 2. **README.md** （ルートディレクトリ）
- **目的**: プロジェクト概要と自動切り替えへの明確な参照
- **対象**: 新規参加者、AI アシスタント
- **内容**:
  - プロジェクト構成
  - 開発の始め方
  - DATABASE_AUTO_SWITCH.mdへの参照（複数箇所）

### 3. **prisma/schema.prisma** （先頭に警告コメント追加）
- **目的**: スキーマファイルを開いた際に即座に気づく
- **対象**: スキーマを編集しようとする開発者
- **内容**:
  - 自動切り替えシステムの警告
  - 手動編集不要の注意
  - DATABASE_AUTO_SWITCH.mdへの参照

### 4. **prisma/SCHEMA_WARNING.txt**
- **目的**: Prismaディレクトリ内での追加警告
- **対象**: Prismaスキーマを扱う開発者
- **内容**:
  - 自動切り替えの警告
  - 推奨される使用方法

### 5. **package.json** （コメント追加）
- **目的**: NPMスクリプトを見た際に気づく
- **対象**: package.jsonを確認する開発者
- **内容**:
  - データベース自動切り替えの説明コメント
  - 各スクリプトの動作説明

### 6. **.agent/AI_QUICK_REFERENCE.md**
- **目的**: AI アシスタントが確実に理解するためのガイド
- **対象**: AI アシスタント（最重要）
- **内容**:
  - AIが陥りやすいミスの警告
  - 推奨される回答例
  - 絶対に提案してはいけないこと
  - デバッグチェックリスト

### 7. **.agent/database-environment-strategy.md** （既存）
- **目的**: 詳細な技術仕様
- **対象**: 技術的な詳細が必要な場合
- **内容**:
  - データベース戦略の詳細
  - メリット・デメリット比較
  - 代替案の検討

---

## 🎯 AIが確実に気づく仕組み

### レイヤー1: プロジェクトルート
```
DATABASE_AUTO_SWITCH.md  ← 目立つファイル名
README.md                ← 最初に読むファイル
```

### レイヤー2: 重要ファイル内のコメント
```
prisma/schema.prisma     ← 先頭に警告コメント
package.json             ← コメントで説明
```

### レイヤー3: AI専用ガイド
```
.agent/AI_QUICK_REFERENCE.md  ← AI向けクイックリファレンス
```

### レイヤー4: 詳細ドキュメント
```
.agent/database-environment-strategy.md  ← 技術詳細
```

---

## 📍 AIが気づくポイント

### 1. ファイル名で気づく
- `DATABASE_AUTO_SWITCH.md` - 大文字で目立つ
- `AI_QUICK_REFERENCE.md` - AI向けと明記

### 2. ファイル内容で気づく
- ⚠️ 警告マーク多用
- 🚨 絵文字で視覚的に強調
- **太字**で重要箇所を強調

### 3. 複数箇所での言及
- README.md → DATABASE_AUTO_SWITCH.md
- schema.prisma → DATABASE_AUTO_SWITCH.md
- package.json → DATABASE_AUTO_SWITCH.md
- AI_QUICK_REFERENCE.md → DATABASE_AUTO_SWITCH.md

### 4. 明確な指示
- "必ず参照してください"
- "絶対に〜してはいけない"
- "推奨される方法"

---

## 🔄 情報の流れ

```
新しいAIセッション開始
    ↓
プロジェクトファイルをスキャン
    ↓
DATABASE_AUTO_SWITCH.md を発見
    ↓
README.md で複数回言及されていることに気づく
    ↓
.agent/AI_QUICK_REFERENCE.md を発見
    ↓
自動切り替えシステムを理解
    ↓
正確な回答を提供
```

---

## ✅ 確認事項

### AIが確実に気づくために実装したこと：

- [x] ルートディレクトリに目立つファイル名で配置
- [x] README.mdで複数回言及
- [x] スキーマファイルの先頭に警告コメント
- [x] package.jsonにコメント追加
- [x] .agentディレクトリにAI専用ガイド
- [x] 絵文字と太字で視覚的に強調
- [x] "必ず"、"絶対に"などの強い表現を使用
- [x] 複数のファイルから相互参照
- [x] よくある誤解を明記
- [x] 推奨される回答例を提供

---

## 🎓 期待される効果

### 新しいAIセッションでも：
1. ✅ データベース自動切り替えシステムの存在に気づく
2. ✅ DATABASE_AUTO_SWITCH.md を参照する
3. ✅ 正確な情報を提供できる
4. ✅ 誤った提案（手動編集など）をしない
5. ✅ ユーザーに適切なドキュメントを案内できる

---

## 📚 ドキュメント構造

```
プロジェクトルート/
├── DATABASE_AUTO_SWITCH.md          ← メインドキュメント
├── README.md                        ← プロジェクト概要
├── package.json                     ← スクリプト定義（コメント付き）
├── prisma/
│   ├── schema.prisma               ← 警告コメント付き
│   └── SCHEMA_WARNING.txt          ← 追加警告
└── .agent/
    ├── AI_QUICK_REFERENCE.md       ← AI専用ガイド
    └── database-environment-strategy.md  ← 技術詳細
```

---

**これにより、新しいAIセッションでも確実にデータベース自動切り替えシステムを理解し、正確な情報を提供できます。**

**最終更新: 2025-12-23**
**バージョン: 3.8.7**
